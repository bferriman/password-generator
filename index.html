<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <title>Page Title</title>

    <script>
    
    function validateInput() {

        var inputValid = true;
        var formInput = document.getElementById("passGenForm");
        var charCountStr = formInput[0].value;
        var hasLowercase = formInput[1].checked;
        var hasUppercase = formInput[2].checked;
        var hasNumbers = formInput[3].checked;
        var hasSpecialChars = formInput[4].checked;

        console.log(charCountStr + " " + hasLowercase + " " + hasUppercase + " " + hasNumbers + " " + hasSpecialChars);

        var charCountNum = Number(charCountStr);
        if(Number.isSafeInteger(charCountNum) === false) {
            inputValid = false;
            document.getElementById("charCountHelpBlock").innerHTML = "Please enter an integer";
        }
        else if (charCountNum < 8 || charCountNum > 128){
            inputValid = false;
            document.getElementById("charCountHelpBlock").innerHTML = "Please choose a number between 8 and 128";
        }
        else {
            document.getElementById("charCountHelpBlock").innerHTML = "Thank you!";
        }
        
        if (hasLowercase === false && hasUppercase === false && hasNumbers === false && hasSpecialChars === false){
            inputValid = false;
            document.getElementById("checkboxHelpBlock").innerHTML = "Please choose at lease one";
        }
        else {
            document.getElementById("checkboxHelpBlock").innerHTML = "";
        }

        if(inputValid) {
            generatePassword(charCountNum, hasLowercase, hasUppercase, hasNumbers, hasSpecialChars);
        }
    }

    function generatePassword(passLength, hasLower, hasUpper, hasNums, hasSpecials) {
        
        const lowercase = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];
        const uppercase = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"];
        const numbers = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"];
        const specialChars = ["!", "@", "#", "$", "%", "^", "&", "*", "(", ")", "-", "_"];

        var password = "";
            
        //build an array that contains all 

        var validSet = [];

        if(hasLower){
            validSet = validSet.concat(lowercase);
            console.log("Lowercase selected");
        }
        if(hasUpper){
            validSet = validSet.concat(uppercase);
            console.log("Uppercase selected");
        }
        if(hasNums){
            validSet = validSet.concat(numbers);
            console.log("Numbers selected");
        }
        if(hasSpecials){
            validSet = validSet.concat(specialChars);
            console.log("Special characters selected");
        }

        //build password of requested length using characters in validSet array

        for (var i = 0; i < passLength; i++) {
            password += validSet[Math.floor(Math.random() * validSet.length)];
        }

        console.log("Password: " + password);
    }

    </script>

</head>

<body>

    
    <section class="container bg-white border my-5">
    
        <div class="row">
            <div class="col">    
                <h1 class="text-dusk font-weight-bold text-center main-title bot-border-3">Password Generator</h1>
            </div>
        </div>

        <div class="row">

            <div class="col">

                <form class="mb-3" id="passGenForm">

                    <div class="form-group">
                        <label for="charCount">How long would you like your password to be?</label>
                        <input type="text" class="form-control rounded-0" id="charCount" aria-describedby="charCountHelpBlock" required>
                        <small id="charCountHelpBlock" class="form-text text-muted">
                            Please choose a number of characters between 8 and 128.
                        </small>
                    </div>

                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="wantLowercase">
                        <label class="form-check-label mr-4" for="wantLowercase">Lowercase Letters</label>
                    </div>
                    
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="wantUppercase">
                        <label class="form-check-label mr-4" for="wantUppercase">Uppercase Letters</label>
                    </div>

                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="wantNumbers">
                        <label class="form-check-label mr-4" for="wantNumbers">Numbers</label>
                    </div>

                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="wantSpecialChars">
                        <label class="form-check-label mr-4" for="wantSpecialChars">Special Characters</label>
                    </div>

                    <p id="checkboxHelpBlock" class="form-text text-muted"></p>

                    <button type="button" onclick="validateInput()" class="btn rounded-0 text-white bg-dusk mt-3">Submit</button>

                </form>

            </div>

        </div>
    </section>

</body>

</html>